# å¯Œæ–‡æœ¬å†…å®¹æ•°æ®åº“è®¾è®¡æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜äº†å¦‚ä½•è®¾è®¡MongoDBæ•°æ®åº“ç»“æ„ä»¥æ”¯æŒå¯Œæ–‡æœ¬ç¼–è¾‘å™¨å†…å®¹å­˜å‚¨ï¼ŒåŸºäºTiptapç¼–è¾‘å™¨ç”Ÿæˆçš„HTMLå†…å®¹ã€‚

## ğŸ—ï¸ æ•°æ®åº“ç»“æ„è®¾è®¡

### Article é›†åˆï¼ˆæ ¸å¿ƒè¡¨ï¼‰
```javascript
{
  semanticId: "article-2024-ai-trends",        // è¯­ä¹‰åŒ–ID
  title: {
    zh: "2024å¹´äººå·¥æ™ºèƒ½å‘å±•è¶‹åŠ¿",              // ä¸­æ–‡æ ‡é¢˜
    en: "AI Trends in 2024"                   // è‹±æ–‡æ ‡é¢˜
  },
  summary: {
    zh: "æœ¬æ–‡æ¢è®¨2024å¹´äººå·¥æ™ºèƒ½é¢†åŸŸçš„æœ€æ–°å‘å±•è¶‹åŠ¿...",
    en: "This article explores the latest AI trends in 2024..."
  },
  content: {
    zh: "<h2>2024å¹´äººå·¥æ™ºèƒ½å‘å±•è¶‹åŠ¿</h2><p>éšç€æŠ€æœ¯çš„å¿«é€Ÿå‘å±•...</p>",
    en: "<h2>AI Trends in 2024</h2><p>With rapid technological development...</p>"
  },
  category: ObjectId("67890abcde12345f67890ab"), // åˆ†ç±»å¼•ç”¨
  tags: [ObjectId("12345abcde67890f12345ab")],   // æ ‡ç­¾å¼•ç”¨æ•°ç»„
  author: ObjectId("abcdef1234567890abcdef12"),  // ä½œè€…å¼•ç”¨
  status: "published",                          // çŠ¶æ€ï¼šdraft/published/archived
  publishedAt: ISODate("2024-01-15T10:30:00Z"), // å‘å¸ƒæ—¶é—´
  views: 1250,                                  // æµè§ˆé‡
  readTime: 8,                                  // é˜…è¯»æ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰
  imageUrl: "/images/ai-trends-2024.jpg",       // ä¸»å›¾URL
  slug: "2024-ai-trends",                       // URLå‹å¥½æ ‡è¯†
  isHot: true,                                  // çƒ­é—¨æ ‡è®°
  isImportant: false,                           // é‡è¦æ ‡è®°
  isCritical: true,                            // å…³é”®æ ‡è®°
  externalUrl: "https://example.com/external",  // å¤–éƒ¨é“¾æ¥
  featuredImage: {                              // ç‰¹è‰²å›¾ç‰‡
    url: "/images/featured/ai-trends.jpg",
    alt: "äººå·¥æ™ºèƒ½å‘å±•è¶‹åŠ¿",
    caption: "2024å¹´AIæŠ€æœ¯å‘å±•é¢„æµ‹"
  },
  seo: {                                        // SEOä¼˜åŒ–
    metaTitle: "2024 AIè¶‹åŠ¿ | äººå·¥æ™ºèƒ½å‘å±•",
    metaDescription: "æ·±å…¥äº†è§£2024å¹´äººå·¥æ™ºèƒ½é¢†åŸŸçš„æœ€æ–°å‘å±•è¶‹åŠ¿å’ŒæŠ€æœ¯çªç ´",
    keywords: ["äººå·¥æ™ºèƒ½", "AI", "2024è¶‹åŠ¿", "æŠ€æœ¯å‘å±•"]
  },
  relatedArticles: [                            // ç›¸å…³æ–‡ç« 
    ObjectId("78901bcdef23456g78901bc")
  ],
  createdAt: ISODate("2024-01-10T08:00:00Z"),   // åˆ›å»ºæ—¶é—´
  updatedAt: ISODate("2024-01-15T10:30:00Z")    // æ›´æ–°æ—¶é—´
}
```

## ğŸ¯ å¯Œæ–‡æœ¬å†…å®¹å­˜å‚¨ç­–ç•¥

### 1. HTMLå†…å®¹å­˜å‚¨
- **æ ¼å¼**: ç›´æ¥å­˜å‚¨Tiptapç¼–è¾‘å™¨ç”Ÿæˆçš„HTML
- **ä¼˜åŠ¿**: ä¿æŒå®Œæ•´çš„æ ¼å¼å’Œæ ·å¼ä¿¡æ¯
- **ç¤ºä¾‹**: 
```html
<h2>ç« èŠ‚æ ‡é¢˜</h2>
<p>è¿™æ˜¯ä¸€ä¸ª<strong>åŠ ç²—</strong>çš„æ®µè½ã€‚</p>
<ul>
  <li>åˆ—è¡¨é¡¹1</li>
  <li>åˆ—è¡¨é¡¹2</li>
</ul>
<table>
  <tr><th>è¡¨å¤´</th><th>è¡¨å¤´2</th></tr>
  <tr><td>æ•°æ®1</td><td>æ•°æ®2</td></tr>
</table>
```

### 2. å¤šè¯­è¨€æ”¯æŒ
- ä¸­è‹±æ–‡å†…å®¹åˆ†åˆ«å­˜å‚¨
- ç‹¬ç«‹çš„HTMLç»“æ„
- æ”¯æŒè¯­è¨€ç‰¹å®šçš„æ ¼å¼éœ€æ±‚

### 3. åª’ä½“èµ„æºå¤„ç†
- **å›¾ç‰‡**: å­˜å‚¨ç›¸å¯¹URLè·¯å¾„
- **è¡¨æ ¼**: å®Œæ•´HTMLè¡¨æ ¼ç»“æ„
- **é“¾æ¥**: ä¿æŒå®Œæ•´çš„<a>æ ‡ç­¾ç»“æ„

## ğŸ” ç´¢å¼•ä¼˜åŒ–

### å…¨æ–‡æœç´¢ç´¢å¼•
```javascript
// æ”¯æŒä¸­è‹±æ–‡å…¨æ–‡æœç´¢
db.articles.createIndex({
  "title.zh": "text",
  "title.en": "text", 
  "summary.zh": "text",
  "summary.en": "text",
  "content.zh": "text",
  "content.en": "text"
})
```

### å¤åˆç´¢å¼•
```javascript
// çŠ¶æ€å’Œå‘å¸ƒæ—¶é—´
db.articles.createIndex({ status: 1, publishedAt: -1 })

// åˆ†ç±»å’ŒçŠ¶æ€  
db.articles.createIndex({ category: 1, status: 1 })

// ä½œè€…å’ŒçŠ¶æ€
db.articles.createIndex({ author: 1, status: 1 })

// çƒ­é—¨æ–‡ç« 
db.articles.createIndex({ isHot: 1, publishedAt: -1 })
```

## ğŸ› ï¸ æŸ¥è¯¢ç¤ºä¾‹

### 1. è·å–å·²å‘å¸ƒçš„æ–‡ç« 
```javascript
db.articles.find({ 
  status: "published", 
  publishedAt: { $lte: new Date() } 
}).sort({ publishedAt: -1 })
```

### 2. å…¨æ–‡æœç´¢
```javascript
db.articles.find({
  $text: { $search: "äººå·¥æ™ºèƒ½ å‘å±•" },
  status: "published"
}).sort({ score: { $meta: "textScore" } })
```

### 3. åˆ†ç±»ç­›é€‰
```javascript
db.articles.find({
  category: ObjectId("67890abcde12345f67890ab"),
  status: "published"
}).sort({ publishedAt: -1 })
```

## ğŸ’¾ å­˜å‚¨è€ƒè™‘

### ä¼˜ç‚¹
- âœ… å®Œæ•´çš„æ ¼å¼ä¿ç•™
- âœ… ç›´æ¥å‰ç«¯æ¸²æŸ“
- âœ… ç®€å•çš„å­˜å‚¨ç»“æ„
- âœ… è‰¯å¥½çš„æŸ¥è¯¢æ€§èƒ½

### æ³¨æ„äº‹é¡¹
- âš ï¸ HTMLå†…å®¹å¯èƒ½è¾ƒå¤§
- âš ï¸ éœ€è¦é€‚å½“çš„ç´¢å¼•ç­–ç•¥
- âš ï¸ è€ƒè™‘å†…å®¹æ¸…ç†ï¼ˆXSSé˜²æŠ¤ï¼‰

## ğŸ”’ å®‰å…¨è€ƒè™‘

### 1. XSSé˜²æŠ¤
```javascript
// æœåŠ¡ç«¯å†…å®¹æ¸…ç†
import DOMPurify from 'dompurify';

const cleanHTML = DOMPurify.sanitize(articleContent);
```

### 2. è¾“å…¥éªŒè¯
- éªŒè¯HTMLç»“æ„å®Œæ•´æ€§
- é™åˆ¶ç‰¹å®šæ ‡ç­¾å’Œå±æ€§
- éªŒè¯URLæ ¼å¼

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### 1. åˆ†é¡µæŸ¥è¯¢
```javascript
// ä½¿ç”¨skipå’Œlimitè¿›è¡Œåˆ†é¡µ
db.articles.find({ status: "published" })
  .skip((page - 1) * limit)
  .limit(limit)
  .sort({ publishedAt: -1 })
```

### 2. å­—æ®µé€‰æ‹©
```javascript
// åªè¿”å›éœ€è¦çš„å­—æ®µ
db.articles.find({}, {
  title: 1,
  summary: 1,
  publishedAt: 1,
  imageUrl: 1
})
```

## ğŸš€ éƒ¨ç½²å»ºè®®

### 1. æ•°æ®åº“é…ç½®
```yaml
# MongoDBé…ç½®
storage:
  wiredTiger:
    engineConfig:
      cacheSizeGB: 2
```

### 2. å¤‡ä»½ç­–ç•¥
- å®šæœŸå¤‡ä»½articlesé›†åˆ
- ä½¿ç”¨mongodumpè¿›è¡Œå…¨é‡å¤‡ä»½
- è€ƒè™‘å¢é‡å¤‡ä»½ç­–ç•¥

## ğŸ“Š ç›‘æ§æŒ‡æ ‡

- å¹³å‡æ–‡æ¡£å¤§å°
- æŸ¥è¯¢å“åº”æ—¶é—´
- ç´¢å¼•å‘½ä¸­ç‡
- å­˜å‚¨ç©ºé—´ä½¿ç”¨

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜
1. **æ–‡æ¡£è¿‡å¤§**: è€ƒè™‘æ‹†åˆ†å†…å®¹æˆ–ä½¿ç”¨GridFS
2. **æŸ¥è¯¢æ…¢**: æ£€æŸ¥ç´¢å¼•ä½¿ç”¨æƒ…å†µ
3. **å­˜å‚¨ä¸è¶³**: ç›‘æ§ç£ç›˜ç©ºé—´ä½¿ç”¨

### æ€§èƒ½è°ƒä¼˜
- æ·»åŠ åˆé€‚çš„ç´¢å¼•
- ä¼˜åŒ–æŸ¥è¯¢è¯­å¥
- è€ƒè™‘åˆ†ç‰‡é›†ç¾¤ï¼ˆå¤§è§„æ¨¡éƒ¨ç½²ï¼‰

---

## ğŸ¯ æ€»ç»“

è¿™ä¸ªæ•°æ®åº“ç»“æ„è®¾è®¡å……åˆ†è€ƒè™‘äº†å¯Œæ–‡æœ¬å†…å®¹çš„å­˜å‚¨éœ€æ±‚ï¼Œæä¾›äº†ï¼š

1. **å®Œæ•´çš„æ ¼å¼æ”¯æŒ**: HTMLç›´æ¥å­˜å‚¨ç¡®ä¿æ ¼å¼å®Œæ•´æ€§
2. **å¤šè¯­è¨€èƒ½åŠ›**: ç‹¬ç«‹çš„ä¸­è‹±æ–‡å†…å®¹å­˜å‚¨
3. **æ€§èƒ½ä¼˜åŒ–**: åˆç†çš„ç´¢å¼•ç­–ç•¥å’ŒæŸ¥è¯¢ä¼˜åŒ–
4. **æ‰©å±•æ€§**: æ”¯æŒSEOã€ç›¸å…³æ–‡ç« ç­‰æ‰©å±•åŠŸèƒ½
5. **å®‰å…¨æ€§**: XSSé˜²æŠ¤å’Œè¾“å…¥éªŒè¯æœºåˆ¶

é€‚ç”¨äºæ–°é—»å‘å¸ƒç³»ç»Ÿã€åšå®¢å¹³å°ã€å†…å®¹ç®¡ç†ç³»ç»Ÿç­‰éœ€è¦å¯Œæ–‡æœ¬ç¼–è¾‘åŠŸèƒ½çš„åœºæ™¯ã€‚