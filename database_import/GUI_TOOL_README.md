# MongoDB 数据库管理图形界面工具

这是一个用于管理 MongoDB 数据库的图形界面工具，专门为 AI News 项目设计。

## 功能特性

- ✅ 测试 MongoDB 数据库连接
- ✅ 查看集合中的所有文档
- ✅ 导入默认 JSON 数据到集合
- ✅ **选择自定义 JSON 文件导入**
- ✅ **数据格式验证和校验**
- ✅ 清空集合数据
- ✅ 实时显示操作结果

## 系统要求

- Python 3.7+
- MongoDB 数据库服务

## 安装依赖

```bash
pip install -r requirements.txt
```

## 使用方法

### 方法一：使用批处理文件（推荐）

1. 双击运行 `run_gui_tool.bat`
2. 程序会自动检查并安装依赖
3. 图形界面会自动打开

### 方法二：手动运行

```bash
cd database_import
python mongo_db_gui_tool.py
```

## 界面说明

### 数据库配置区域
- **连接字符串**: MongoDB 连接字符串（默认: mongodb://localhost:27017/ai-news）
- **集合名称**: 要操作的集合名称（默认: news）

### 操作按钮
1. **测试连接**: 测试与 MongoDB 的连接状态
2. **查看所有文档**: 显示集合中的前50个文档
3. **导入JSON数据**: 从默认的 `news_data.json` 导入数据到集合
4. **选择文件导入**: 选择自定义的 JSON 文件进行导入
5. **清空集合**: 删除集合中的所有文档

### 结果显示区域
显示所有操作的详细结果和日志信息

## 数据导入说明

### 默认数据导入
工具会自动从以下路径读取 JSON 数据文件：
`F:\github\aiNews\database_import\news_data.json`

### 自定义文件导入
点击"选择文件导入"按钮，可以选择本地的任何 JSON 文件进行导入。

### 数据验证
导入前会自动进行数据格式验证，包括：
- 必需字段检查：semanticId、title、summary、category
- 多语言字段结构验证：title 和 summary 字段必须包含 zh 和 en 语言
- 数据格式验证：确保是有效的 JSON 数组
- 文档结构验证：每个文档必须是字典格式

确保导入的文件包含有效的 JSON 数据数组。

## 故障排除

### 常见问题

1. **连接失败**: 检查 MongoDB 服务是否启动
2. **依赖安装失败**: 确保有网络连接，或手动安装：`pip install pymongo==4.5.0`
3. **Python 未找到**: 安装 Python 3.7+ 并确保在 PATH 中

### 手动安装依赖

```bash
pip install pymongo==4.5.0
```

## 安全提示

- 不要在生产环境中使用此工具
- 清空集合操作不可恢复，请谨慎使用
- 确保连接字符串不包含敏感信息

## 开发信息

- 开发语言: Python 3
- GUI 框架: Tkinter
- MongoDB 驱动: PyMongo
- 文件编码: UTF-8

## 版本历史

- v1.1.0 (2024-01-20): 增强版本
  - ✅ 添加自定义文件选择导入功能
  - ✅ 添加数据格式验证和校验
  - ✅ 改进导入结果显示
  - ✅ 支持任意本地 JSON 文件导入

- v1.0.0 (2024-01-20): 初始版本发布
  - 基本数据库操作功能
  - 图形用户界面
  - 错误处理和日志显示